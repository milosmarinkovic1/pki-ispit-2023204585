<div class="toy-list-container">
  <h2><i class="fas fa-gamepad"></i> Sve Igračke</h2>
  
  <div *ngIf="isLoading" class="loading">
    <p><i class="fas fa-spinner fa-spin"></i> Učitavanje igračaka...</p>
  </div>
  
  <div *ngIf="error" class="error">
    <p><i class="fas fa-exclamation-triangle"></i> {{ error }}</p>
    <button (click)="loadToys()" class="retry-btn">
      <i class="fas fa-redo"></i> Pokušaj ponovo
    </button>
  </div>
  
  <div *ngIf="!isLoading && !error" class="toys-grid">
    <div *ngFor="let toy of displayedToys" class="toy-card">
      <div class="toy-image-container">
        <img [src]="'https://toy.pequla.com' + toy.imageUrl" [alt]="toy.name" class="toy-image">
        <div class="toy-price">
          <i class="fas fa-tag"></i> {{ formatPrice(toy.price) }}
        </div>
      </div>
      
      <div class="toy-content">
        <h3 class="toy-name">
          <i class="fas fa-cube"></i> {{ toy.name }}
        </h3>
        
        <div class="toy-details">
          <p><i class="fas fa-shapes"></i> <strong>Tip:</strong> {{ getTypeName(toy.type) }}</p>
          <p><i class="fas fa-child"></i> <strong>Uzrast:</strong> {{ getAgeGroupName(toy.ageGroup) }}</p>
          <p>
            <i class="fas fa-users"></i> <strong>Namenjeno za:</strong> 
            <span [class]="'target-group ' + toy.targetGroup" style="margin-left: 0.5rem;">
              {{ getTargetGroupLabel(toy.targetGroup) }}
            </span>
          </p>
          
          <!-- OCENA -->
          <p>
            <i class="fas fa-star"></i> <strong>Ocena:</strong> 
            <span *ngIf="getAverageRating(toy) > 0" class="rating-info">
              <span class="rating-stars">
                <span *ngFor="let star of [1,2,3,4,5]" 
                      [class.filled]="star <= getAverageRating(toy)"
                      class="star">
                  ★
                </span>
              </span>
              <span class="rating-value">{{ getAverageRating(toy).toFixed(1) }}/5</span>
              <span class="rating-count">({{ toy.reviews?.length || 0 }})</span>
            </span>
            <span *ngIf="getAverageRating(toy) === 0" class="no-rating">
              Nema ocena
            </span>
          </p>
        </div>
        
        <div class="toy-actions">
          <!-- ISPRAVLJENO: reserveToy(toy) umesto reserveToy() -->
          <button (click)="reserveToy(toy)" class="reserve-btn">
            <i class="fas fa-cart-plus"></i> Rezerviši
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <div *ngIf="!isLoading && !error && displayedToys.length === 0" class="no-toys">
    <p><i class="fas fa-box-open"></i> Nema pronađenih igračaka.</p>
  </div>
</div>